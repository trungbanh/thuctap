{% extends 'layout/base.html.twig' %}

{% block body %}
    <div id="mgs">
    </div>
    <script >
        $(document).ready(function(){
            $("#updatedetail").on("click",function(event){
                $.ajax({
                    type : 'POST',
                    url : '/author/update/detail',
                    data : $("#detai").serialize(),
                    success: function(data) {
                        console.log(data);
                        $("#mgs").html(data);
                    }
                });
                return false;
            });

            $("#updatepass").on("click",function(event){
                event.preventDefault();
                let re = $('input[name=passre]').val(); 
                let newp = $('input[name=passnew]').val(); 
                if (re != newp) {
                    alert("password khong giong nhau");
                }
            });
        });
    </script>

    {% set user = App.session.getUser() %}
    <div class='updatebox row'>
        <form id='detai' enctype='multipart/form-data'>
            <input name="idAuthor" type="hidden" value= {{user.getIdAuthor()}} > <br/>
            Tên: <input name="nickname" type="text" value= {{user.getNickname()}} > <br/>
            Email: <input name="mail" type="text" value= {{ user.getMail()}}> <br/>
            Mật khẩu cũ : <input name="passold" type="password" > <br/>
            Mật khẩu mới : <input name="passnew" type="password" > <br/>
            Mật khẩu mới nhập lại : <input name="passre" type="password" > <br/>
            
            <button id='updatedetail' name="update" >Cập nhập</button>
        </form>
    </div>

{% endblock %}
